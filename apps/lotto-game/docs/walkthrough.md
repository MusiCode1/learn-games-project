# יומן פיתוח - משחק לוטו (Lotto Game)

## 2026-01-12 11:37

### שילוב מערכת מחזק (Booster) ודף הגדרות מרכזי

הושלמה אינטגרציה מלאה עם ספריית `learn-booster-kit`, יצירת דף הגדרות ייעודי, ומעבר לניהול סטייט ריאקטיבי ופרסיסטנטי (שמירת הגדרות).

#### מה בוצע?

**1. ניהול הגדרות ותשתית**

- **[NEW] `settings.svelte.ts`**: נוצר Store גלובלי ב-`$lib/stores` המרכז את כל הגדרות המשחק והמחזק.
  - תומך בשמירה אוטומטית ל-`localStorage`.
  - כולל מנגנון מיגרציה לגרסאות עתידיות.
  - מסיר את הצורך בניהול State מקומי בדפי המשחק.

**2. ממשק הגדרות (`/settings`)**

- **דף הגדרות ייעודי**: נוצר Route חדש ב-`/settings` המחליף את המודל הישן (`SettingsModal`).
- **`SettingsControls.svelte`**: רכיב המכיל את כל פקדי המשחק (בחירת תוכן, זוגות, לולאה) ופקדי המחזק (סוג פרס, בחירת אפליקציות, מקור וידאו).
- **תאימות**: הממשק מותאם לעבודה בטאבלטים (Kiosk Mode) עם כפתורים גדולים וברורים.

**3. אינטגרציה במשחק**

- **Layout**: הוסף `BoosterContainer` ואתחול של `boosterService` ברמת האפליקציה ב-`+layout.svelte`.
- **Game Page**: עודכן `+page.svelte` לקריאת הגדרות מה-Store הגלובלי והפעלת `triggerReward()` בסיום המשחק.
- **ניקיון**: נמחק רכיב `SettingsModal.svelte` הישן.

**4. תשתית ו-Deployment**

- **Tailwind**: הוספת `@source` ל-`layout.css` כדי לכלול את רכיבי `learn-booster-kit` בבניית ה-CSS.
- **Cloudflare Adapter**: החלפת המתאם ב-`svelte.config.js` ל-`@sveltejs/adapter-cloudflare` לצורך פריסת Production.
- **תאימות**: עדכון `wrangler.jsonc` לשימוש ב-`nodejs_compat`.
- **שם חבילה**: תיקון שם הפרויקט ב-`package.json` ל-`lotto-game`.

#### החלטות ארכיטקטורה

- **Store מאוחד**: נבחרה גישה של Store יחיד (`settings.svelte.ts`) המכיל גם הגדרות משחק וגם דגל `boosterEnabled`, במקום לפצל ל-Stores נפרדים. גישה זו (שנלקחה מ-`train-addition-game`) פישטה את הניהול בהשוואה למבנה המפוצל ב-`wordys-game`.
- **דף נפרד במקום מודל**: המעבר לדף הגדרות מלא (`/settings`) במקום מודל מאפשר הצגת כמות גדולה של הגדרות (במיוחד הגדרות המחזק המורכבות) בצורה נוחה וקריאה יותר, ומונע עומס ויזואלי על מסך המשחק עצמו.

---

## 2025-12-24 18:25

### הוספת מצב "צורות גיאומטריות" ושיפורי ממשק

נוספה אפשרות לשחק עם צורות גיאומטריות במקום אותיות, כולל התאמות עיצוביות ושיפורי חווית משתמש.

#### מה בוצע?

**1. לוגיקה ומשחקיות (Game Logic)**

- **סוגי תוכן**: תמיכה בשני מצבי משחק - אותיות (Letters) וצורות (Shapes).
- **מצבי צבעים**: אפשרות לבחור בין "צבע אחיד" (Uniform) לבין "צבע רנדומלי לכל זוג" (Random).
- **ניהול צבעים**: במצב "צבע רנדומלי", כל הכרטיסים של אותה צורה מקבלים צבע זהה כדי להקל על הזיהוי.
- **Grid דינמי**: הלוח מתאים את מספר העמודות והשורות באופן אוטומטי בהתאם לכמות הכרטיסים (למשל, 4 כרטיסים יוצגו כ-2x2).

**2. רכיבים וממשק משתמש**

- **[NEW] `ShapeSvg.svelte`**: רכיב חדש להצגת 10 צורות גיאומטריות שונות (עיגול, ריבוע, משולש, כוכב, לב, מעוין ועוד). נוספה מסגרת (Stroke) בצבע הצורה לשיפור הנראות.
- **`Card.svelte`**:
  - עודכן לתמיכה בהצגת רכיבי SVG.
  - **Refactor**: המרת רשימת ה-classes הארוכה לשימוש ב-Derived State ומילון מצבים (Idle, Matched, Error, Selected) לקוד נקי וקריא יותר.
- **`SettingsModal.svelte`**:
  - נוסף בורר ראשי עבור "סוג תוכן" (אותיות/צורות).
  - נוספה רשת לבחירת צורות ספציפיות למשחק.
  - נוסף בורר למצב צבעים.
- **`+page.svelte`**: כותרת המשחק מתעדכנת דינמית ("משחק לוטו אותיות" / "משחק לוטו צורות").

#### קבצים ששונו

- `src/lib/utils/gameLogic.ts`
- `src/lib/components/Card.svelte`
- `src/lib/components/Board.svelte`
- `src/lib/components/SettingsModal.svelte`
- `src/lib/components/ShapeSvg.svelte` (קובץ חדש)
- `src/routes/+page.svelte`
