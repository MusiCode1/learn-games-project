# תוכנית בדיקות מקצה לקצה (E2E) לפרויקט gingim-booster

לאחר שבחנתי את קוד המקור, אני מבין שהפרויקט מיועד להיות מוזרק לאתר ג'ינג'ים ולהציג סרטונים כתגמול בסיום משימות במשחקים. להלן תוכנית בדיקות פשוטה שתדמה שימוש רגיל בפרויקט.

## 1. הכנת הפרויקט לבדיקה

### 1.1 בניית הפרויקט

```bash
# בניית הפרויקט
npm run build
```

הפקודה הזו תיצור את קובץ ה-JavaScript המוכן להפצה בתיקיית `dist`.

### 1.2 העתקת קובץ ההזרקה

לאחר הבנייה, נוודא שקובץ ההזרקה `gingim-booster-inject.js` נמצא בתיקיית `public`.

## 2. תהליך הבדיקה

### 2.1 הזרקת הקוד לאתר ג'ינג'ים

יש מספר דרכים להזריק את הקוד לאתר ג'ינג'ים:

#### אפשרות 1: שימוש בתוסף דפדפן Tampermonkey

1. התקן את תוסף [Tampermonkey](https://www.tampermonkey.net/) בדפדפן
2. צור סקריפט חדש עם התוכן של `public/gingim-booster-inject.js`
3. שנה את הכתובת `@injectFileUrl` לכתובת שבה נמצא קובץ `i.js` (למשל, אם אתה מריץ שרת מקומי, זה יהיה `http://localhost:443/i.js`)
4. שמור את הסקריפט

#### אפשרות 2: שימוש בקונסולת הדפדפן

1. פתח את אתר ג'ינג'ים (https://gingim.net/games)
2. פתח את קונסולת הדפדפן (F12 או לחיצה ימנית -> בדוק)
3. העתק והדבק את התוכן של `public/gingim-booster-inject.js` לקונסולה, אחרי שתחליף את `@injectFileUrl` בכתובת האמיתית
4. הרץ את הקוד

### 2.2 בדיקת הפונקציונליות

לאחר הזרקת הקוד, נבדוק את הפונקציונליות של התוסף:

1. **בדיקת טעינה**: וודא שהתוסף נטען בהצלחה (אפשר לבדוק בקונסולה אם יש הודעות לוג מהתוסף)
2. **בדיקת זיהוי משחקים**: פתח אחד מהמשחקים הנתמכים (לפי הרשימה ב-`src/lib/game-config.ts`)
3. **בדיקת הזרקת קוד למשחק**: וודא שהקוד מוזרק למשחק בהצלחה (אפשר לבדוק בקונסולה)
4. **בדיקת הצגת סרטונים**: השלם משימה במשחק וודא שמוצג סרטון כתגמול

## 3. בדיקות ספציפיות

### 3.1 בדיקת הגדרות

1. פתח את עמוד ההגדרות של התוסף (אם יש כזה)
2. שנה את ההגדרות (למשל, זמן הצגת הסרטון, מקור הסרטונים)
3. וודא שהשינויים נשמרים ומשפיעים על התנהגות התוסף

### 3.2 בדיקת משחקים שונים

בדוק את התוסף עם מספר משחקים שונים מהרשימה:
- "סדר את החדר" (tidy_up)
- "לחץ וסע" (touch_go)
- "כלי תחבורה" (transport)

וודא שהתוסף מזהה כל משחק בצורה נכונה ומציג סרטונים בנקודות המתאימות.

### 3.3 בדיקת מקורות וידאו שונים

אם התוסף תומך במקורות וידאו שונים, בדוק כל אחד מהם:
- סרטונים מקומיים
- סרטונים מ-Google Drive
- סרטונים מ-YouTube

## 4. כלי עזר לבדיקה

### 4.1 הפעלת שרת פיתוח מקומי

אם אתה רוצה לבדוק שינויים בקוד בזמן אמת, אפשר להפעיל שרת פיתוח מקומי:

```bash
npm run dev
```

ואז להזריק את הקוד שמצביע לשרת המקומי.

### 4.2 שימוש בכלי הפיתוח של הדפדפן

כלי הפיתוח של הדפדפן יכולים לעזור בבדיקת התוסף:
- **קונסולה**: לבדיקת הודעות לוג ושגיאות
- **Elements**: לבדיקת ה-DOM ושינויים שהתוסף מבצע
- **Network**: לבדיקת בקשות רשת (למשל, טעינת סרטונים)
- **Application**: לבדיקת ה-localStorage ומידע שנשמר

## 5. תיעוד הבדיקות

מומלץ לתעד את תוצאות הבדיקות:
1. צילומי מסך של התוסף בפעולה
2. רשימת בעיות שנמצאו
3. הצעות לשיפור

## 6. דוגמה לתסריט בדיקה מלא

להלן דוגמה לתסריט בדיקה מלא:

1. בנה את הפרויקט: `npm run build`
2. פתח את אתר ג'ינג'ים: https://gingim.net/games
3. הזרק את הקוד באמצעות Tampermonkey או קונסולת הדפדפן
4. וודא שהתוסף נטען בהצלחה (בדוק הודעות בקונסולה)
5. פתח את המשחק "סדר את החדר"
6. השלם משימה במשחק
7. וודא שמוצג סרטון כתגמול
8. בדוק שהסרטון נסגר אוטומטית אחרי הזמן שהוגדר
9. חזור על התהליך עם משחקים אחרים

## 7. רשימת בדיקות מפורטת

### 7.1 בדיקות טעינה והזרקה

- [ ] התוסף נטען בהצלחה באתר ג'ינג'ים
- [ ] אין שגיאות בקונסולה בעת טעינת התוסף
- [ ] התוסף מזריק קוד למשחקים בהצלחה

### 7.2 בדיקות זיהוי משחקים

- [ ] התוסף מזהה את המשחק "סדר את החדר" (tidy_up)
- [ ] התוסף מזהה את המשחק "לחץ וסע" (touch_go)
- [ ] התוסף מזהה את המשחק "כלי תחבורה" (transport)
- [ ] התוסף מתנהג כראוי עם משחק לא מוכר (משתמש בהגדרות ברירת מחדל)

### 7.3 בדיקות הצגת סרטונים

- [ ] סרטון מוצג בסיום משימה במשחק
- [ ] הסרטון נסגר אוטומטית אחרי הזמן שהוגדר
- [ ] ניתן לסגור את הסרטון ידנית (אם האפשרות מופעלת)
- [ ] הסרטון מוצג בתדירות הנכונה (לפי הגדרת turnsPerReward)

### 7.4 בדיקות הגדרות

- [ ] ניתן לשנות את זמן הצגת הסרטון
- [ ] ניתן לשנות את מקור הסרטונים
- [ ] ניתן לשנות את תדירות הצגת הסרטונים
- [ ] ניתן להפעיל/לבטל הסתרת פס התקדמות
- [ ] ההגדרות נשמרות בין רענונים של הדף

### 7.5 בדיקות מקורות וידאו

- [ ] סרטונים מקומיים מוצגים בהצלחה
- [ ] סרטונים מ-Google Drive מוצגים בהצלחה
- [ ] סרטונים מ-YouTube מוצגים בהצלחה (אם התכונה מיושמת)

### 7.6 בדיקות שגיאות וחוסן

- [ ] התוסף מטפל בשגיאות בטעינת סרטונים
- [ ] התוסף מטפל בשגיאות בהזרקת קוד למשחק
- [ ] התוסף ממשיך לעבוד גם אחרי רענון הדף