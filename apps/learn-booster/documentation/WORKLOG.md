# יומן עבודה - פרויקט gingim-booster

יומן זה מתעד את תהליך הפיתוח היומיומי של פרויקט gingim-booster, כולל משימות שבוצעו, אתגרים, החלטות ותובנות.

הרשומות מסודרות בסדר כרונולוגי הפוך - הרשומות החדשות מופיעות בתחילת הקובץ (אחרי החלק של מבנה הרשומות).

## מבנה הרשומות
כל רשומה ביומן תכלול:
- **תאריך**: יום ושעה
- **משימות שבוצעו**: פירוט העבודה שנעשתה
- **אתגרים והתמודדויות**: בעיות שעלו ואיך טופלו
- **החלטות**: החלטות משמעותיות שהתקבלו
- **משימות להמשך**: מה מתוכנן להמשך העבודה
- **טקסט חופשי**: תיעוד מפורט של התהליך, מחשבות ותובנות

---

## 25/03/2025
### משימות שבוצעו
- חיפוש פתרון לבעיית הזרקת קוד למשחק 'כותבים מילים'
- פיתוח פתרון חדש לאיתור פונקציית המטרה באמצעות `object-finder.ts`

### אתגרים והתמודדויות
- הזרקה סטנדרטית לא פעלה על המשחק 'כותבים מילים'
- ניסיון להזריק פונקציה לכל קריאה לפונקציה דרך `call`, `apply` או `bind` התגלה כפתרון מכוער ומגושם

### החלטות
- לפתח גישה חדשה לאיתור פונקציית המטרה באמצעות חיפוש רקורסיבי
- להוציא בעתיד את הקוד המכוער של `function-monitor.ts` משירות

### משימות להמשך
- שילוב מנגנון החיפוש החדש כ'קו שני' במקרה שלא נמצאה פונקציית המטרה הידועה והקבועה

### טקסט חופשי
ניסיתי למצוא דרכים איך להתגבר על העובדה שהזרקה סטנדרטית לא פעלה על המשחק 'כותבים מילים' או `writing_words`. ניסיתי להזריק פונקציה לכל קריאה לפונקציה דרך `call` `apply` או `bind`. אבל זה מכוער מוזר ומגושם. לכן חזרתי לחפש דרכים לחפש את פונקציית המטרה בכל רחבי ה- `window`.

כרגע למרבה השמחה קלוד הצליח לכתוב קוד יפה ומהיר, שמצליח לאתר את פונקציית המטרה בתוך כמה אלפיות שנייה. הוא נמצא בקובץ `src\lib\object-finder.ts`. השלב הבא יהיה לשלב את החיפוש בתור 'קו שני' במקרה שלא נמצאה פונקציית המטרה הידועה והקבועה.

הבעיה הזו היא המשך ישיר לשינויים שתועדו ביומן השינויים מה-24/03/2025, שם ניסינו לשפר את מנגנון הזרקת הקוד למשחקים באמצעות ניטור פונקציות. האסטרטגיה המקורית של החלפת פונקציה ידועה מראש לא הייתה מספיק אמינה, ולכן פיתחנו גישה חדשה עם monkey patching של `Function.prototype.call`. הפתרון הנוכחי מתבסס על הפונקציה `findKeyInObject` שפיתחנו ב-19/03/2025, אבל עם שיפורים משמעותיים שמאפשרים איתור מהיר ויעיל יותר של פונקציית המטרה.

הגישה שתיארתי כמכוערת, מוזרה ומגושמת מיושמת בקובץ `src/lib/function-monitor.ts`. היא מבצעת monkey patching על `Function.prototype.call` - כלומר, משנה את ההתנהגות הבסיסית של JavaScript על ידי החלפת פונקציה מובנית. הקוד שם מנטר קריאות לפונקציה ספציפית (במקרה שלנו, `makeNewTurn`) ומאפשר להפעיל קוד לפני ו/או אחרי הקריאה לפונקציה המקורית. הבעיה עם הגישה הזו היא שהיא משפיעה על כל קריאה ל-`Function.prototype.call` בכל מקום בקוד, מה שעלול לגרום לבעיות לא צפויות ולהשפיע על ביצועים. למרות שהקוד משתמש ב-WeakMap לשיפור ביצועים ומניעת בדיקות חוזרות, עדיין מדובר בפתרון שמרגיש כמו "האק" ולא כמו פתרון נקי ואלגנטי.

בהמשך הפיתוח, אנחנו מתכננים להוציא את הקוד המכוער של `function-monitor.ts` משירות ולהסתמך על הפתרון החדש והאלגנטי יותר.

---